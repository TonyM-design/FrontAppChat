<section>
    <div class="container ">

        <div class="row d-flex justify-content-center align-items-center h-100 m-5">
            <div class="col-lg-6  col-12">
                <div *ngIf="this.showAlertSuccess === true" class="alert alert-success" role="alert">
                    <h4 class="alert-heading">Vous êtes désormais connecté !</h4>

                    <hr />
                    <p>
                        Vous allez être automatiquement rédirigé sur la page
                        d'accueil dans quelques secondes.
                    </p>
                </div>
                <div *ngIf="this.showAlertError === true" class="alert alert-warning alert-dismissible" role="alert">
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    <h4 class="alert-heading">Echec de la création de l'utilisateur</h4>

                    <hr />
                    <p>
                        {{errorMessage}}
                    </p>
                </div>
                <div class="card text-black" style="border-radius: 25px;">
                    <div class="card-body ">
                        <div class="row justify-content-center">
                            <div class=" order-2 order-lg-1">
                                <p class="text-center h1 ">
                                    Formulaire d'inscription
                                </p>


                                <hr />

                                <form [formGroup]="form" (submit)="register($event)" class="mx-1 mx-md-4 was-validated">
                                    <div class="d-flex flex-row align-items-center"
                                        [ngClass]="{'mb-3': !form.get('email')?.hasError('email'), 'mb-2': form.get('email')?.hasError('email')}">
                                        <i class="fas fa-envelope fa-lg me-3 fa-fw"></i>
                                        <div class="form-outline flex-fill mb-0">
                                            <input [(ngModel)]="user.email" type="email" id="email" name="email"
                                                formControlName="email" class="form-control"
                                                placeholder="Votre adresse e-mail de connexion" required />
                                            <div *ngIf="form.get('email')?.hasError('email')"
                                                class="d-flex justify-content-end">
                                                <small> <i>L'email n'est pas valide.</i></small>
                                            </div>
                                        </div>

                                    </div>



                                    <div class="d-flex flex-row align-items-center "
                                        [ngClass]="{'mb-3': !form.get('password')?.hasError('password'), 'mb-2': form.get('password')?.hasError('password')}">
                                        <i class="fas fa-lock fa-lg me-3 fa-fw"></i>
                                        <div class="form-outline flex-fill mb-0">
                                            <input [(ngModel)]="user.password" type="password" id="password"
                                                class="form-control" placeholder="Mot de passe" name="password"
                                                formControlName="password" [minLength]="5" required />
                                            <div *ngIf="form.get('password')?.hasError('password')"
                                                class="d-flex justify-content-end"></div>
                                            <div *ngIf="form.get('password')?.value.length < 5 && form.get('password')?.value.length != 0"
                                                class="d-flex justify-content-end">
                                                <small> <i>Doit contenir au moins 5 caractères.
                                                    </i></small>
                                            </div>

                                        </div>
                                    </div>

                                    <div class="d-flex flex-row align-items-center "
                                        [ngClass]="{'mb-3': !form.get('name')?.hasError('name'), 'mb-2': form.get('name')?.hasError('name')}">
                                        <i class="fas fa-pen fa-lg me-3 fa-fw"></i>
                                        <div class="form-outline flex-fill mb-0">
                                            <input [(ngModel)]="user.name" id="name" name="name" formControlName="name"
                                                type="text" class="form-control" placeholder="Votre nom "
                                                [minLength]="5" required />
                                            <div *ngIf="form.get('name')?.value.length < 5 && form.get('name')?.value.length != 0 "
                                                class="d-flex justify-content-end">
                                                <small> <i>Doit contenir au moins 5 caractères.
                                                    </i></small>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="d-flex flex-row align-items-center mb-3"
                                        [ngClass]="{'mb-3': !form.get('nickname')?.hasError('nickname'), 'mb-2': form.get('nickname')?.hasError('nickname')}">
                                        <i class="fas fa-user fa-lg me-3 fa-fw"></i>
                                        <div class="form-outline flex-fill mb-0">
                                            <input [(ngModel)]="user.nickname" class="form-control" type="text"
                                                id="nickname" name="nickname" formControlName="nickname"
                                                placeholder="Votre pseudo" [minLength]="5" required />
                                            <div *ngIf="form.get('nickname')?.value.length < 5 && form.get('nickname')?.value.length != 0 "
                                                class="d-flex justify-content-end">
                                                <small> <i>Doit contenir au moins 5 caractères.
                                                    </i></small>
                                            </div>
                                        </div>
                                    </div>


                                    <div class="d-flex justify-content-center mx-4 mb-3 mb-lg-4">
                                        <button type="submit" class="btn btn-outline-success btn-lg"
                                            [disabled]="form.invalid">
                                            Créer mon compte
                                        </button>
                                    </div>
                                </form>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>